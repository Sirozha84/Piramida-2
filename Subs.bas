'Подготовка экрана
Sub InitScreen()
	ink 7
	paper 0
	flash 0
	bright 0
	over 0
	border 0
End Sub

'Рисование закрытого блока
sub BrickClosed(x, y as ubyte)
	print at x, y; ink 2; "!""""#"; at x + 1, y;  "ABBC"; at x + 2, y;  "abbc"
end sub

'Рисование открытого блока
sub BrickOpened(x, y, i as ubyte)
	print at x, y; ink 3; "$%%&"; at x + 1, y; "D  F"; at x + 2, y; "deef"
	print at x + 1, y + 1; ink 5; i
end sub

'Рисование/стирание курсора
sub BrickCursor(x, y, p as ubyte)
	print at x, y; over 1; ink 8; paper p; "    "; at x + 1, y; "    "; at x + 2, y; "    "
end sub

'Выделение блока
sub BrickSelect(x, y as ubyte)
	print at x, y; over 1; ink 4; "    "; at x + 1, y; " "; at x + 1, y + 3; " "; at x + 2, y; "    "
end sub

'Снятие выделения
sub BrickDeselect(x, y as ubyte)
	print at x, y; over 1; ink 3; "    "; at x + 1, y; " "; at x + 1, y + 3; " "; at x + 2, y; "    "
end sub

'Уничтожение блоков
sub DestroyBricks(x1, y1, x2, y2 as ubyte)
	print at x1, y1; ink 3; "-../"; at x1 + 1, y1; "M  O"; at x1 + 2, y1; "mnno"
	print at x2, y2; ink 3; "-../"; at x2 + 1, y2; "M  O"; at x2 + 2, y2; "mnno"
	for i = 50 to 35 step -5
		beep 0.0005, i
	next
	print at x1, y1; ink 3; "    "; at x1 + 1, y1; " EN "; at x1 + 2, y1; "    "
	print at x2, y2; ink 3; "    "; at x2 + 1, y2; " EN "; at x2 + 2, y2; "    "
	for i = 35 to 20 step -5
		beep 0.0005, i
	next	
	print at x1, y1; "    "; at x1 + 1, y1; "    "; at x1 + 2, y1; "    "
	print at x2, y2; "    "; at x2 + 1, y2; "    "; at x2 + 2, y2; "    "
	for i = 20 to 5 step -5
		beep 0.0005, i
	next
end sub

'Переворачивание блоков
sub OpenBrick(x, y as ubyte)
	print at x, y; ink 2; " '( "; at x + 1, y; " GH "; at x + 2, y; " gh "
	for i = 0 to 10 step 5
		beep 0.0005, i
	next
	print at x, y; ink 3; " )"; ink 2; "* "; at x + 1, y; ink 3; " )"; ink 2; "* "; at x + 2, y; ink 3; " )"; ink 2; "* "
	for i = 20 to 30 step 5
		beep 0.0005, i
	next
	print at x, y; ink 3; " +, "; at x + 1, y; " KL "; at x + 2, y; " kl "
	for i = 40 to 50 step 5
		beep 0.0005, i
	next
end sub

'Звук ошибки
sub ErrorSound()
	beep 0.05, -20
	beep 0.05, -50
	beep 0.05, -20
end sub

sub BackGround()
	asm
			call backdraw
			jp backexit
		backdraw:
			defb 205,146,23,59,59,225,17,49,0,25,229,217,209,6,0,217,33,0,64,1,0,27,217,120,254,0,32,12,26,254,5,19,32,8,26,79,19,26,71,19,5,121,217,119,35,11,120,177,32,228,251,201,5,0,64,192,0,0,3,7,248,7,224,0,127,0,128,0,240,15,1,1,7,15,240,15,7,0,0,0,240,31,0,0,1,1,0,192,128,128,3,7,128,7,224,63,1,3,0,31,240,1,224,1,7,15,0,15,248,224,128,0,128,3,0,0,0,3,248,192,128,128,3,0,195,7,224,255,224,224,126,3,240,199,248,1,7,0,135,15,224,192,128,3,15,192,128,0,0,128,128,63,128,127,3,252,3,248,31,192,0,126,0,127,15,192,0,254,7,248,7,241,0,255,0,207,192,15,224,0,63,255,252,5,0,20,1,248,0,15,192,5,0,103,192,0,0,3,7,248,7,224,0,15,0,0,128,240,15,3,1,7,15,240,15,7,0,0,0,224,15,0,0,15,0,192,192,128,128,3,7,128,7,224,63,1,3,0,31,240,1,224,1,7,15,0,15,240,224,128,0,128,3,0,0,0,3,248,192,128,128,3,0,195,7,224,255,128,224,0,3,240,199,248,1,7,0,135,15,224,128,128,3,0,0,128,5,0,4,63,128,127,3,248,3,248,31,192,0,254,0,127,143,192,0,254,7,240,7,241,0,255,0,223,192,15,240,0,63,255,252,5,0,128,192,0,0,3,7,240,7,224,0,7,0,0,128,240,15,3,1,7,15,224,15,7,0,0,0,224,15,0,0,31,0,224,192,128,128,3,7,4,7,224,63,1,7,24,15,240,32,193,1,7,14,8,15,240,224,128,0,3,1,0,0,0,3,248,192,128,128,3,0,131,7,224,192,0,224,0,3,240,195,240,1,7,0,7,15,192,128,128,3,0,0,128,0,1,1,0,63,128,127,3,248,3,248,31,192,0,252,0,127,143,192,0,254,7,240,7,241,0,255,0,223,128,15,240,0,63,255,252,5,0,128,192,0,0,3,7,240,7,224,0,3,0,0,128,240,7,7,1,7,15,224,15,7,0,0,0,224,15,0,0,31,0,240,192,128,128,3,6,4,7,224,62,1,7,24,15,240,32,193,1,7,12,8,15,240,192,128,0,3,1,0,0,0,7,240,192,128,128,3,0,131,7,224,192,0,192,0,1,240,195,240,1,7,0,7,15,192,128,128,7,0,0,192,0,3,3,5,0,21,1,7,0,240,192,5,0,135,192,0,0,3,7,224,7,224,0,3,1,0,192,240,7,7,1,7,15,192,15,7,0,0,0,192,7,0,0,31,0,240,192,128,128,3,6,12,7,224,60,3,7,24,15,240,32,65,1,7,12,24,15,240,192,128,0,3,1,0,0,0,7,240,192,128,128,3,0,3,7,224,192,0,192,0,1,240,193,224,1,7,1,7,15,192,128,128,7,0,0,192,0,7,7,5,0,21,1,7,0,240,192,5,0,135,192,127,128,3,7,224,7,224,60,1,1,0,192,240,3,7,1,7,15,192,15,7,31,128,0,192,7,0,0,30,240,248,192,128,128,3,4,12,7,224,0,3,15,60,7,240,48,3,1,7,8,24,15,240,192,128,1,7,128,0,0,0,15,224,192,128,128,3,1,3,7,224,192,0,192,0,1,240,192,0,1,7,3,7,15,128,0,128,7,0,0,192,0,15,31,5,0,21,1,7,0,240,192,5,0,135,192,127,128,3,7,192,7,224,62,1,1,0,192,240,3,15,1,7,15,128,15,7,31,128,0,192,7,0,0,24,248,248,192,128,128,3,4,28,7,224,0,7,15,60,7,240,48,3,1,7,8,56,15,224,192,128,1,7,128,0,0,0,31,224,192,128,128,3,1,3,7,224,192,0,128,255,0,240,192,0,1,7,3,7,14,0,255,0,207,31,224,224,0,63,0,252,5,0,20,1,7,0,240,192,5,0,135,192,127,128,3,7,192,7,224,63,1,3,0,224,240,1,15,1,7,15,128,15,7,31,128,0,128,3,0,0,16,252,248,192,128,128,3,0,28,7,224,0,15,15,60,7,240,56,7,1,7,0,56,15,224,192,128,1,7,128,0,0,0,63,192,192,128,128,3,3,3,7,224,192,0,129,255,128,240,192,0,1,7,7,7,14,0,255,0,207,63,240,224,0,63,0,252,5,0,20,1,7,0,240,192,5,0,199,5,128,64,5,136,64,5,0,224,5,34,32,5,0,160,5,8,32,5,34,32,5,136,32,5,0,224,5,34,32,5,0,128,5,8,32,5,128,32,5,136,64,5,0,224,5,34,32,5,0,160,5,8,32,5,34,32,5,136,32,5,0,224,5,34,32,5,170,64,5,85,32,5,17,32,5,136,32,5,16,32,5,0,64,5,68,32,5,85,32,5,170,64,5,34,32,5,0,96,5,170,64,5,85,32,5,68,32,5,136,32,5,1,32,5,0,64,5,17,32,5,81,32,5,170,64,5,34,32,5,0,32,5,8,32,5,0,32,5,170,64,5,85,32,5,17,32,5,136,32,5,16,32,5,0,64,5,68,32,5,85,32,5,170,64,5,34,32,5,0,96,5,170,64,5,85,32,5,68,32,5,136,32,5,1,32,5,0,64,5,17,32,5,21,32,5,170,64,5,34,32,5,0,32,5,128,32,5,0,32,5,7,64,16,16,16,2,5,16,6,2,16,2,16,16,2,16,2,16,16,16,2,16,16,7,16,16,7,7,2,16,2,16,2,16,2,5,16,6,2,5,16,6,2,5,16,4,2,16,2,16,16,7,7,7,2,2,16,2,16,2,16,2,16,16,2,2,5,16,4,2,2,16,2,16,2,16,16,2,16,2,16,16,2,7,2,16,5,2,10,7,2,7,2,2,2,7,5,2,5,16,2,16,5,2,4,7,2,2,2,5,7,20,2,2,7,2,2,5,7,167,5,1,192,5,8,160,5,15,32
		backexit:
	end asm
end sub